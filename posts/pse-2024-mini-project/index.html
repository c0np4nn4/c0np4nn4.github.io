<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="My blog site.">

  <title>Simple ZK Static Program Analysis</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://c0np4nn4.github.io/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://c0np4nn4.github.io/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://c0np4nn4.github.io/img/apple-touch-icon.png">
  <style>
  /* nanum-gothic-regular - korean_latin */
  @font-face {
    font-display: swap;
    /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
    font-family: 'Nanum Gothic';
    font-style: normal;
    font-weight: 400;
    src: url('../fonts/nanum-gothic-v26-korean_latin-regular.woff2') format('woff2');
    /* Chrome 36+, Opera 23+, Firefox 39+, Safari 12+, iOS 10+ */
  }
</style>

  <style>
  /* light mode colors */
  body {
    --primary-color: #5871a2;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #ffffff;
    --text-color: #2f3030;
    --text-pale-color: #767676;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    --primary-color: #6f8fd1;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    --bg-color: #1c1c1c;
    --text-color: #c1c1c1;
    --text-pale-color: #848484;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    --main-font: 'Nanum Gothic', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --code-font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --homepage-max-width: 768px;
    --main-max-width: 768px;
    --avatar-size: 60px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 0px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }

  txtred {
    color: tomato;
  }

  txtblu {
    color: skyblue;
  }

  txtylw {
    color: gold;
  }

  txtgrn {
    color: lime;
  }
</style>

  <link rel="stylesheet" href="https://c0np4nn4.github.io/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-dark.css" />


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" integrity="sha384-HORx6nWi8j5/mYA+y57/9/CZc5z8HnEw4WUZWy5yOn9ToKBv1l58vJaufFAn9Zzi" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false },
                { left: '\\(', right: '\\)', display: false },
                { left: '\\[', right: '\\]', display: true }
            ],
            throwOnError: false
        });
    });
</script>


  <meta name="google-site-verification" content="3_fDSANQ1lZHsWb4hxyDgILfwMpL33vhlCIi37-BkDM" />

</head>

<body class="post dark">
  
  
<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#deuleogamyeo">들어가며</a>
          
        </li>
        
        <li>
          <a class="h2" href="#guhyeon-sangse">구현 상세</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#1-parser">1. Parser</a>
            </li>
            
            <li>
              <a class="h3" href="#2-circuit">2. Circuit</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#gyeolgwa">결과</a>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    
<header>
  <nav>
    <a href="https:&#x2F;&#x2F;c0np4nn4.github.io&#x2F;posts">← Back</a>
  </nav>
</header>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
"></div>
      
      <article class="prose">
        <h1>Simple ZK Static Program Analysis</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Aug 16, 2024</span>
            </div>

          
          <div id="tags">
            <a class="instant" href="https://c0np4nn4.github.io//tags/zkp"><span>#</span>ZKP</a><a class="instant" href="https://c0np4nn4.github.io//tags/project"><span>#</span>Project</a><a class="instant" href="https://c0np4nn4.github.io//tags/pse-core-program"><span>#</span>PSE core program</a><a class="instant" href="https://c0np4nn4.github.io//tags/cryptography"><span>#</span>Cryptography</a><a class="instant" href="https://c0np4nn4.github.io//tags/static-analysis"><span>#</span>Static Analysis</a><a class="instant" href="https://c0np4nn4.github.io//tags/circom"><span>#</span>circom</a>
          </div>
          
        </div>

        
        

        

        <h1 id="deuleogamyeo">들어가며<a class="zola-anchor" href="#deuleogamyeo" aria-label="Anchor link for: deuleogamyeo" style="visibility: hidden;"></a>
</h1>
<p>8월 16일 금요일의 PSE Core Program off-line meet 시간에는 <em>ZKP</em> 를 활용한 미니 해커톤이 진행되었다.
나는 Orion 논문을 읽다가 발견했던 흥미로운 주제인 <em>ZK Static Program Analysis</em> 로 미니 해커톤에 참가했다. 결과물로 구현하고자 하는 것은 아래와 같다.</p>
<blockquote>
<p><em>임의의 Rust 프로그램 소스코드에 <code>division by zero</code>를 일으킬 수 있는 코드가 없음을 ZKP로 증명</em> 하는 프로그램</p>
</blockquote>
<p>ZKP 프로젝트인만큼 원본 소스코드에 관해서는 <strong>zero-knowledge</strong>인 것이 특징이다.
<em>안전한 소스코드</em> 임을 직접 제출할 필요 없이도 증명할 수 있는 것이다.</p>
<p><code>Parser</code>와 <code>Circuit</code>은 아래와 같이 설게 및 구현되었다.</p>
<ol>
<li><strong>Parser</strong>: Rust 코드를 분석해 Circuit의 입력값으로 변환하는 단계</li>
<li><strong>Circuit</strong>: 분석된 Rust코드를 통해 <strong>정적 분석</strong>을 수행하는 단계</li>
</ol>
<p>구현물은 https://github.com/c0np4nn4/simple_zk_spa 에서 확인할 수 있다.</p>
<hr />
<h1 id="guhyeon-sangse">구현 상세<a class="zola-anchor" href="#guhyeon-sangse" aria-label="Anchor link for: guhyeon-sangse" style="visibility: hidden;"></a>
</h1>
<h2 id="1-parser">1. Parser<a class="zola-anchor" href="#1-parser" aria-label="Anchor link for: 1-parser" style="visibility: hidden;"></a>
</h2>
<p><strong>Parser</strong>는 Rust 문법으로 작성된 소스코드를 읽고 각 줄을 분석하여 아래 형태의 배열로 변환한다.</p>
<table><thead><tr><th style="text-align: center">원소 1</th><th style="text-align: center">원소 2</th><th style="text-align: center">원소 3</th><th style="text-align: center">원소 4</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>Op Type</code><br>명령어 종류</td><td style="text-align: center"><code>lhs elem</code><br>좌항 원소</td><td style="text-align: center"><code>rhs elem 1</code><br>우항 원소 1</td><td style="text-align: center"><code>rhs elem 2</code><br>우항 원소 2</td></tr>
</tbody></table>
<p>아주 간단한 형태의 <code>예시 프로그램</code> 사용을 가정했기에 분석기도 매우 간결하게 구현하였다.
명령어의 종류는 아래와 같이 총 4개로만 설계했다.</p>
<table><thead><tr><th style="text-align: center">명령어 번호</th><th>명령어 종류</th><th>명령어 설명</th></tr></thead><tbody>
<tr><td style="text-align: center">0</td><td>NoOp</td><td>프로그램 종료를 의미하는 동작 코드 <br>모든 배열의 원소가 $0$ (<code>[0, 0, 0, 0]</code>)</td></tr>
<tr><td style="text-align: center">1</td><td>Assign</td><td><code>좌항 원소</code>에 <code>우항 원소 1</code>을 저장 <br>이 때, <code>우항 원소 2</code>는 무조건 $0$</td></tr>
<tr><td style="text-align: center">2</td><td>Addition</td><td><code>좌항 원소</code>에 <code>우항 원소 1</code>과 <code>우항 원소 2</code>의 덧셈 결과를 저장</td></tr>
<tr><td style="text-align: center">3</td><td>Division</td><td><code>좌항 원소</code>에 <code>우항 원소 1</code>과 <code>우항 원소 2</code>의 나눗셈 결과를 저장</td></tr>
</tbody></table>
<p>또, 변수(variable)와 값(value)를 아래와 같이 구분했다.</p>
<ul>
<li><code>변수</code>는 모두 <strong>홀수</strong>로 표기한다.</li>
<li><code>값</code>은 모두 $2$를 곱한 값으로 배열 원소에 저장한다.</li>
</ul>
<h3 id="1-1-example">1-1. Example<a class="zola-anchor" href="#1-1-example" aria-label="Anchor link for: 1-1-example" style="visibility: hidden;"></a>
</h3>
<p>아래와 같은 예제 소스 코드 <code>example.rs</code>가 있다고 해보자.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">	<span class="z-storage z-type z-rust">let</span> x<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">i64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">7</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">	<span class="z-storage z-type z-rust">let</span> y<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">i64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">7</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">	<span class="z-storage z-type z-rust">let</span> z<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">i64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> x <span class="z-keyword z-operator z-arithmetic z-rust">+</span> y<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">	<span class="z-storage z-type z-rust">let</span> a<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">i64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">4</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> z<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>각각의 줄은 다음과 같이 해석된다.</p>
<pre data-lang="js" class="language-js z-code"><code class="language-js" data-lang="js"><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-meta z-array z-literal z-ts">	<span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-constant z-numeric z-decimal z-ts">14</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">0</span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> #<span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>assign<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>x<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-constant z-numeric z-decimal z-ts">7</span> <span class="z-keyword z-operator z-arithmetic z-ts">*</span> <span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-variable z-other z-readwrite z-ts">nil</span><span class="z-meta z-brace z-square z-ts">]</span></span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-meta z-array z-literal z-ts">	<span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-keyword z-operator z-arithmetic z-ts">-</span><span class="z-constant z-numeric z-decimal z-ts">14</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">0</span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> #<span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>assign<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>y<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-keyword z-operator z-arithmetic z-ts">-</span><span class="z-constant z-numeric z-decimal z-ts">7</span> <span class="z-keyword z-operator z-arithmetic z-ts">*</span> <span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-variable z-other z-readwrite z-ts">nil</span><span class="z-meta z-brace z-square z-ts">]</span></span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-meta z-array z-literal z-ts">	<span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">5</span><span class="z-punctuation z-separator z-comma z-ts">,</span>   <span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> #<span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>addition<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>z<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>    <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>x<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>y<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-meta z-brace z-square z-ts">]</span></span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-meta z-array z-literal z-ts">	<span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">3</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">7</span><span class="z-punctuation z-separator z-comma z-ts">,</span>   <span class="z-constant z-numeric z-decimal z-ts">8</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">5</span><span class="z-meta z-brace z-square z-ts">]</span></span>  #<span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>division<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>a<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-constant z-numeric z-decimal z-ts">4</span> <span class="z-keyword z-operator z-arithmetic z-ts">*</span> <span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>z<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-meta z-brace z-square z-ts">]</span></span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">}</span></span>
</span></code></pre>
<p>값에 해당하는 $7, -7, 4$ 는 모두 2배 곱해져서 배열로 정리되어 있음을 확인할 수 있다.</p>
<hr />
<h2 id="2-circuit">2. Circuit<a class="zola-anchor" href="#2-circuit" aria-label="Anchor link for: 2-circuit" style="visibility: hidden;"></a>
</h2>
<p>Parser는 단순하게 구현만 하면 됐지만, Circuit에서는 <strong>정적분석</strong>의 방법을 정하고 이를 구현해야 했다.
이에 관해 "정적 분석은 <strong>계산 안하기</strong> 하는 것이라 생각할 수 있다." 라는 조언을 바탕으로 아래와 같이 분석 방법을 정했다.</p>
<ul>
<li>양수인 <strong>값</strong>은 $+$로 둔다.</li>
<li>음수인 <strong>값</strong>은 $-$로 둔다.</li>
<li>덧셈의 피연산자에 관해 아래 세 가지 경우로 나뉠 수 있다.
<ul>
<li>(양수) + (양수) = 양수, 즉 $+$ 가 된다.</li>
<li>(음수) + (음수) = 음수, 즉 $-$가 된다.</li>
<li>(양수) + (음수) = ??</li>
</ul>
</li>
</ul>
<p>양수와 음수를 더한 경우 결과를 $T$라고 두었으며, 이는 ${+, -, 0}$ 중 하나이다.</p>
<p><code>division by zero</code> 는 나눗셈의 제수(분모)가 $0$일 때 발생한다.
하지만,<em>정확한 계산</em> 수행없이 에러 발생의 가능성을 분석하기 위해서는 '제수가 $T$ 인지'를 검사하는 것으로 충분하다.</p>
<p>만약 검사하는 코드가 <strong>우주선</strong>이나 <strong>비행기</strong>에 들어가는 코드라고 생각해보자.
<code>division by zero</code> 에러로 인해 프로그램이 정지하거나 문제를 일으키는 경우, 우주비행사 또는 비행기 탑승객들의 생명에 직접적인 영향을 끼칠 수 있다.
따라서, 실제로 에러가 발생할지 여부는 확실치 않더라도 가능성을 검출하는 것은 경우에 따라 대단히 중요해질 수 있음을 생각할 수 있다.</p>
<h3 id="2-1-byeonsu-gabs-jeojang">2-1. 변수 값 저장<a class="zola-anchor" href="#2-1-byeonsu-gabs-jeojang" aria-label="Anchor link for: 2-1-byeonsu-gabs-jeojang" style="visibility: hidden;"></a>
</h3>
<p><strong>홀수</strong>로 표시한 변수는 결국 어떠한 정보를 갖게 된다.</p>
<p>정적 분석에서는 <strong>실제 계산</strong>이 없이 분석이 진행되야 하므로, Circuit 내에서는 아래와 같은 작업이 이뤄진다.</p>
<blockquote>
<p>값의 <code>크기</code>는 잊고 <code>부호</code>만 변수에 저장</p>
</blockquote>
<p>예를 들어, 아래와 같은 코드가 있다고 해보자.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">	<span class="z-storage z-type z-rust">let</span> p<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">i64</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span><span class="z-constant z-numeric z-integer z-decimal z-rust">11</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>이를 Parser를 통해 배열로 변환하면 아래와 같은 결과를 얻는다.</p>
<pre data-lang="js" class="language-js z-code"><code class="language-js" data-lang="js"><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-meta z-array z-literal z-ts">	<span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">1</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">22</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-numeric z-decimal z-ts">0</span><span class="z-meta z-brace z-square z-ts">]</span></span> #<span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>assign<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">&#39;</span>p<span class="z-punctuation z-definition z-string z-end z-ts">&#39;</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-constant z-numeric z-decimal z-ts">11</span> <span class="z-keyword z-operator z-arithmetic z-ts">*</span> <span class="z-constant z-numeric z-decimal z-ts">2</span><span class="z-punctuation z-separator z-comma z-ts">,</span>  <span class="z-variable z-other z-readwrite z-ts">nil</span><span class="z-meta z-brace z-square z-ts">]</span></span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">}</span></span>
</span></code></pre>
<p>그리고 이를 Circuit 내부에서는 값의 <code>크기</code>인 $11$은 잊어버리고 그 <code>부호</code>인 $+$만 남긴다.</p>
<pre data-lang="js" class="language-js z-code"><code class="language-js" data-lang="js"><span class="z-source z-ts"><span class="z-variable z-other z-readwrite z-ts">p</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-keyword z-operator z-arithmetic z-ts">+</span>
</span></code></pre>
<h3 id="2-2-t-gyesan-gwajeong">2-2.  $T$ 계산 과정<a class="zola-anchor" href="#2-2-t-gyesan-gwajeong" aria-label="Anchor link for: 2-2-t-gyesan-gwajeong" style="visibility: hidden;"></a>
</h3>
<p>$T$값은 <strong>덧셈</strong>연산을 통해 얻을 수 있다.</p>
<p>따라서, <code>Op Type</code>이 <em>Addition</em> 인 경우에 <code>rhs elem 1</code>과 <code>rhs elem 2</code>의 <code>부호</code>정보를 확인하고 ${+, -, T}$ 중 하나의 결과를 <code>lhs elem</code>에 저장하는 식으로 circuit을 구성했다.</p>
<hr />
<h1 id="gyeolgwa">결과<a class="zola-anchor" href="#gyeolgwa" aria-label="Anchor link for: gyeolgwa" style="visibility: hidden;"></a>
</h1>
<p>Please check the github repo: <a rel="nofollow noreferrer" href="https://github.com/c0np4nn4/simple_zk_spa">Link</a></p>

      </article>

      
      
      <div class="reaction right" data-endpoint="https:&#x2F;&#x2F;example.com&#x2F;api&#x2F;reaction"></div>
      

      
      
      <div class="giscus"></div>
      
      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      © 2025 c0np4nn4
      
      <span>|</span>
      Built with <a href="https://www.getzola.org" rel="noreferrer" target="_blank">zola</a> and <a href="https://github.com/isunjn/serene" rel="noreferrer" target="_blank">serene</a>
      
    </div>
  </div>

  <div class="right">
    
    
      
    
    
    <a id="rss-btn" href="https://c0np4nn4.github.io/posts/feed.xml">RSS</a>
    
    

    
  </div>
</footer>




<dialog id="rss-mask">
  <div>
    <a href="https:&#x2F;&#x2F;c0np4nn4.github.io&#x2F;posts&#x2F;feed.xml">https:&#x2F;&#x2F;c0np4nn4.github.io&#x2F;posts&#x2F;feed.xml</a>
    
    
    <button autofocus aria-label="copy" data-link="https:&#x2F;&#x2F;c0np4nn4.github.io&#x2F;posts&#x2F;feed.xml" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>

    </button>
  </div>
</dialog>



  </main>
</div>

  
<script src="/js/lightense.min.js"></script>


  <script src="https://c0np4nn4.github.io/js/main.js"></script>
</body>

</html>
